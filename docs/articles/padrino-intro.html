<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RPadrino Introduction • RPadrino</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="RPadrino Introduction">
<meta property="og:description" content="RPadrino">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RPadrino</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/padrino-intro.html">RPadrino Introduction</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="padrino-intro_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>RPadrino Introduction</h1>
            
            <h4 class="date">2021-08-17</h4>
      
      
      <div class="hidden name"><code>padrino-intro.Rmd</code></div>

    </div>

    
    
<div id="package-overview" class="section level1">
<h1 class="hasAnchor">
<a href="#package-overview" class="anchor"></a>Package Overview</h1>
<p><em>RPadrino</em> provides an interface to the PADRINO database. PADRINO houses metadata on published Integral Projection Models, and all the information needed to rebuild them. <em>RPadrino</em> provides a set of functions that wrap around <a href="https://levisc8.github.io/ipmr/">ipmr</a> so that you can rebuild these models using <em>R</em>. Additionally, there’s some data downloading and management functionality, as well as tools to help report and cite studies used in an analysis.</p>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<p>Below are some very brief examples of how to select data based on the Metadata table, rebuild those models, and conduct an analysis. The first step for any of this is to access PADRINO. For first time users, this will always mean downloading it. For returning users, you may save and re-load PADRINO, but this example will not make use of the saving/loading functionality provided in <code><a href="../reference/pdb_download.html">pdb_load()</a></code> and <code><a href="../reference/pdb_download.html">pdb_save()</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">RPadrino</span><span class="op">)</span>

<span class="va">pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdb_download.html">pdb_download</a></span><span class="op">(</span>save <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>We’ve now downloaded the PADRINO database. It consists of 10-12 tables, all linked by <code>ipm_id</code>.</p>
<blockquote>
<p>NB: Right now, all of <em>RPadrino</em>’s functionality depends on these tables remaining in the order they’re downloaded/re-loaded in. Therefore, do not try to re-arrange the <code>pdb</code> object (e.g. change the order of the tables in the list). You can sort individual tables in any way you like, but altering the order in which they appear in the list will break pretty much everything.</p>
</blockquote>
<p>We can get a brief overview of the information using the <code>print</code> method:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">pdb</span></code></pre></div>
<pre><code>## A 'pdb' object with 41 unique species, 32 publications, and 250 models.
## Please cite all publications used in an analysis! These can be accessed with
## 'pdb_citations()'.
## 
## The following models have continuously varying environments: 
## aaaa15, aaaa16, aaaa21, aaaa54, aaaa59
## These can take longer to re-build - adjust your expectations accordingly!</code></pre>
<p>We see that some of the IPMs have continuously varying environments - we don’t want to use those for now because they take a while to run. We can use the <code><a href="../reference/pdb_subset.html">pdb_subset()</a></code> function to get only deterministic models. Because of the way PADRINO is structured, <code><a href="../reference/pdb_subset.html">pdb_subset()</a></code> only accepts a set of <code>ipm_id</code>’s that we want to <strong>keep</strong> (as opposed to other subset functions, which may accept some arbitrary logic). Thus, we need to create an index of those, which we can pass to <code><a href="../reference/pdb_subset.html">pdb_subset()</a></code> like so:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sub_ind</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="va">pdb</span><span class="op">$</span><span class="va">Metadata</span><span class="op">$</span><span class="va">ipm_id</span>, 
                   <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aaaa15"</span>, <span class="st">"aaaa16"</span>, <span class="st">"aaaa21"</span>, <span class="st">"aaaa54"</span>, <span class="st">"aaaa59"</span><span class="op">)</span><span class="op">)</span>

<span class="va">det_pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdb_subset.html">pdb_subset</a></span><span class="op">(</span><span class="va">pdb</span>, ipm_ids <span class="op">=</span> <span class="va">sub_ind</span><span class="op">)</span></code></pre></div>
<p>Great! Say we want to find all the <em>Asteraceae</em> in PADRINO. We can first check and see which <code>ipm_id</code>s correspond to those by querying the <code>tax_family</code> column of <code>pdb$Metadata</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">aster_ind</span> <span class="op">&lt;-</span> <span class="va">det_pdb</span><span class="op">$</span><span class="va">Metadata</span><span class="op">$</span><span class="va">ipm_id</span><span class="op">[</span><span class="va">det_pdb</span><span class="op">$</span><span class="va">Metadata</span><span class="op">$</span><span class="va">tax_family</span> <span class="op">==</span> <span class="st">"Asteraceae"</span><span class="op">]</span>

<span class="va">aster_pdb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdb_subset.html">pdb_subset</a></span><span class="op">(</span><span class="va">pdb</span>, ipm_ids <span class="op">=</span> <span class="va">aster_ind</span><span class="op">)</span></code></pre></div>
<p>Next, we can rebuild their IPMs. This is a two step process in <em>RPadrino</em>. The first is to create <code>proto_ipm</code>s with <code><a href="../reference/pdb_make_proto_ipm.html">pdb_make_proto_ipm()</a></code>. This function takes a database object and, optionally, a subset of <code>ipm_id</code>s, and constructs a list of <code>proto_ipm</code>s. <code>proto_ipm</code>s are a common data structure used to represent IPM objects before they are actually constructed. One advantage of this extra step is that you can combine <code>proto_ipm</code>s generated from your own data with <code>ipmr</code> with <code>proto_ipm</code>s generated from PADRINO, so you can augment syntheses with your own data. An example of that is provided further down.</p>
<p>The simplest way to make <code>proto_ipm</code>s for a whole <code>pdb</code> object is:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">proto_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdb_make_proto_ipm.html">pdb_make_proto_ipm</a></span><span class="op">(</span><span class="va">aster_pdb</span><span class="op">)</span></code></pre></div>
<pre><code>## 'ipm_id' aaa326 has the following notes that require your attention:
## aaa326: 'Demographic data from Metcalf Funct Ecol 2006'</code></pre>
<pre><code>## 'ipm_id' aaa329 has the following notes that require your attention:
## aaa329: 'Based on IPM from Rose Ecology 2005; The GPS coordinates were approximated
## to the closest geographic location described in the reference'</code></pre>
<p>We see that there are some notes that require our attention. The first tells us that this IPM is using data from another publication. The second warns us that GPS coordinates aren’t exact, so we should be cautious if we wanted to merge the outputs from this analysis with other spatially referenced datasets (e.g. gridded climate data). We can inspect the IPM structure by printing each <code>proto_ipm</code> object:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">proto_list</span> </code></pre></div>
<pre><code>## This list of 'proto_ipm's contains the following species: 
## Cirsium arvense
## Cirsium canescens
## 
## You can inspect each model by printing it individually.</code></pre>
<p>Next, we can reconstruct the IPMs using <code><a href="../reference/pdb_make_ipm.html">pdb_make_ipm()</a></code>. There are a variety of different options we can specify here, and we’ll get into how that works in the next example.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cirsiums</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/pdb_make_ipm.html">pdb_make_ipm</a></span><span class="op">(</span><span class="va">proto_list</span><span class="op">)</span>

<span class="va">lambdas</span>  <span class="op">&lt;-</span> <span class="fu">lambda</span><span class="op">(</span><span class="va">cirsiums</span><span class="op">)</span>

<span class="va">cirsiums</span></code></pre></div>
<pre><code>## $aaa326
## A simple, density independent, deterministic IPM with 2 sub-kernel(s) defined. 
## Deterministic lambda = 1
## $aaa329
## A simple, density dependent, deterministic IPM with 100 sub-kernel(s) defined. 
## Lambda for the final time step of the model is: 1.146 
## Call lambda(x, type_lambda = "all") for deterministic lambdas
## from each iteration.
## attr(,"class")
## [1] "pdb_ipm" "list"</code></pre>
<p>We’ve rebuilt our first set of IPMs! Next, we’ll explore how to extract a bit more information from these.</p>
</div>
<div id="more-complicated-analyses" class="section level1">
<h1 class="hasAnchor">
<a href="#more-complicated-analyses" class="anchor"></a>More complicated analyses</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/levisc8">Sam Levin</a>, Sanne Evers, Tomos Potter, Dylan Childs, Aldo Compagnoni, Roberto Salguero-Gomez, Tiffany Knight.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
